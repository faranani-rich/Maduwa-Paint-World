/* style.css 
   Shared styles for signup, login, role-select, dashboard, admin pages
   Theme-aware (uses /public/css/themes.css tokens)
   ───────────────────────────────────────────────────────────── */

/* ========== GLOBAL (theme-aware) ========== */
body {
  font-family: Arial, sans-serif;
  max-width: 800px;
  margin: 2rem auto;
  padding: 0 1rem;
  background: var(--bg);
  color: var(--text);
}

h1, h2 { margin: 1rem 0; color: var(--text); }

/* Form elements */
input, select, button, textarea {
  display: block;
  width: 100%;
  box-sizing: border-box;
  margin: 0.5rem 0;
  padding: 0.5rem;
  font-size: 1rem;

  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 12px;
}
input::placeholder, textarea::placeholder { color: var(--muted); }

/* Buttons (use global tokens) */
button {
  cursor: pointer;
  background: var(--accent);
  color: var(--on-accent);
  border: 1px solid var(--accent);
  border-radius: 12px;
  padding: .55rem .9rem;
}
button:hover { filter: brightness(.98); }

/* Links */
a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Horizontal rule */
hr {
  border: none;
  border-top: 1px solid var(--border);
  margin: 2rem 0;
}

/* Tables (for admin.html) */
table { width: 100%; border-collapse: collapse; margin: 1rem 0; background: var(--surface); color: var(--text); }
th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border); }
thead { background: var(--surface-2); color: var(--text); }

/* Header (dashboard) */
header {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  padding: 1rem 0;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}

/* Utility */
.hidden { display: none !important; }

/* Responsive */
@media (min-width: 600px) {
  form, .container { max-width: 400px; margin: 0 auto; }
}

/* Role Choice Page (kept minimal; role-choice.css can override) */
.role-choice-container {
  max-width: 480px;
  margin: 60px auto;
  padding: 2em;
  border-radius: 16px;
  box-shadow: var(--shadow);
  background: var(--surface);
  border: 1px solid var(--border);
  text-align: center;
  color: var(--text);
}
.role-btn {
  margin: 1em .6em 0 .6em;
  padding: 0.8em 1.8em;
  font-size: 1rem;
  border-radius: 12px;
  border: 1px solid var(--accent);
  background: var(--accent);
  color: var(--on-accent);
  cursor: pointer;
  transition: filter .2s;
  width: auto;
  display: inline-block;
}
.role-btn:hover { filter: brightness(.98); }
.back-btn { margin-top: 2em; background: transparent; color: var(--accent); border: 1px solid var(--accent); }

/* =======================================================================
   ADVANCED LOGIN/REGISTER THEME (scoped to <body class="auth-body">)
   ======================================================================= */

.auth-body {
  margin: 0;
  max-width: none;
  min-height: 100dvh;
  color: var(--text);
  background: var(--bg);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ambient background that adapts to theme */
@supports (background: color-mix(in srgb, red, white)) {
  .auth-body {
    background:
      radial-gradient(1200px 800px at 10% -10%, color-mix(in srgb, var(--accent) 14%, var(--bg) 86%), transparent 60%),
      radial-gradient(1000px 600px at 110% 10%, color-mix(in srgb, var(--accent) 10%, var(--bg) 90%), transparent 60%),
      linear-gradient(180deg, var(--bg) 0%, var(--surface-2) 100%);
  }
}

/* Animated background orbs + grid */
.bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.fx-orbs .orb {
  position: absolute; filter: blur(40px); opacity: 0.45; border-radius: 50%;
  animation: float 18s ease-in-out infinite;
}
.orb-a { width: 480px; height: 480px; left: -120px; top: -120px;
  background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent-700) 60%, transparent 70%); }
.orb-b { width: 420px; height: 420px; right: -110px; top: 10%;
  background: radial-gradient(circle at 30% 30%, var(--success), var(--accent-700) 60%, transparent 70%);
  animation-delay: 2s; }
.orb-c { width: 360px; height: 360px; left: 30%; bottom: -160px;
  background: radial-gradient(circle at 40% 40%, #ff9de1, var(--accent) 60%, transparent 70%);
  animation-delay: 4s; }
.grid-overlay {
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
  background-size: 40px 40px, 40px 40px;
  mask-image: radial-gradient(1000px 600px at 50% 40%, rgba(255,255,255,0.85), transparent 80%);
  -webkit-mask-image: radial-gradient(1000px 600px at 50% 40%, rgba(255,255,255,0.85), transparent 80%);
}

@keyframes float {
  0%,100% { transform: translate3d(0,0,0) scale(1); }
  50% { transform: translate3d(0,-12px,0) scale(1.02); }
}

/* Shell layout */
.auth-shell {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: 1.1fr 1fr;
  gap: clamp(24px, 4vw, 48px);
  align-items: center;
  padding: clamp(24px, 4vw, 48px);
  min-height: 100dvh;
}

/* Brand / left column */
.brand-pane { display: grid; align-items: center; }
.brand-card {
  padding: clamp(24px, 4vw, 40px);
  border-radius: 18px;
  box-shadow: var(--shadow);
}
.glass {
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.06));
  border: 1px solid var(--border);
  backdrop-filter: blur(14px);
}
.surface-raise { transform: translate3d(0,0,0); transition: transform .25s ease, box-shadow .25s ease; }
.surface-raise:hover { transform: translateY(-2px); box-shadow: 0 18px 50px rgba(0,0,0,0.35); }

.logo-mark {
  width: 56px; height: 56px; position: relative; margin-bottom: 10px;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.25));
}
.logo-dot, .logo-stem { position: absolute; background: var(--accent); border-radius: 999px; }
.logo-dot { width: 16px; height: 16px; left: 20px; top: 6px; }
.logo-stem { width: 12px; height: 44px; left: 22px; top: 12px;
  background: linear-gradient(180deg, var(--accent), var(--accent-700)); }

.brand-title {
  margin: 0.2rem 0 0.25rem;
  font-size: clamp(1.6rem, 2.8vw, 2.2rem);
  letter-spacing: 0.2px;
}
.brand-tagline { margin: 0 0 1rem; color: var(--muted); }
.highlights { margin: 1rem 0 0; padding-left: 1.1rem; color: var(--text); }
.highlights li { margin: .35rem 0; }

/* Auth / right column */
.auth-pane { width: 100%; display: grid; gap: 16px; align-content: center; }
.auth-card { padding: clamp(20px, 3.6vw, 28px); border-radius: 18px; background: var(--surface); border: 1px solid var(--border); }
.postcard { padding: 14px 18px; border-radius: 12px; text-align: center; background: var(--surface); border: 1px dashed var(--border); }

.auth-header h2 { margin: 0 0 4px; font-size: 1.6rem; color: var(--text); }
.auth-header .muted { color: var(--muted); margin: 0 0 10px; }

/* OAuth buttons row */
.oauth-row {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}
@media (min-width: 520px) {
  .oauth-row { grid-template-columns: 1fr 1fr 1fr; }
}

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: 10px; width: 100%; height: 48px;
  padding: 0 16px; border-radius: 12px; border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text); font-weight: 600; letter-spacing: .2px;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(0,0,0,.20); }
.btn:active { transform: translateY(0); }
.btn.primary {
  background: var(--accent);
  color: var(--on-accent);
  border-color: var(--accent);
}
.btn.success {
  background: var(--success);
  color: var(--on-accent);
  border-color: var(--success);
}
.btn.ghost   { background: transparent; border: 1px dashed var(--border); color: var(--text); }

/* OAuth button specifics (Google/Apple per brand guidance) */
.btn.oauth svg { width: 18px; height: 18px; display: inline-block; }
.btn.oauth span { line-height: 1; }

/* Google: light button with dark text */
.btn.oauth.google {
  background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(240,244,255,.96));
  color: #0b1220;
  border-color: rgba(0,0,0,.08);
}

/* Apple: use high-contrast LIGHT variant (readable on dark or tinted panels) */
.btn.oauth.apple {
  background: #ffffff;
  color: #0b1220;              /* dark text for contrast */
  border-color: rgba(0,0,0,.12);
}

/* Focus ring for all buttons */
.btn:focus-visible { outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 40%, transparent); }

/* Simple icon placeholders (kept for any legacy usage) */
.icon { width: 18px; height: 18px; display: inline-block; border-radius: 4px; }
.i-google { background: conic-gradient(from 45deg, #ea4335 0 25%, #fbbc05 25% 50%, #34a853 50% 75%, #4285f4 75% 100%); border-radius: 50%; }
/* FIX: add standard 'mask' along with the prefixed version */
.i-apple  {
  background: linear-gradient(180deg, #fff, #ddd);
  mask: radial-gradient(circle at 50% 45%, #000 60%, transparent 61%) top/100% 100% no-repeat;
  -webkit-mask: radial-gradient(circle at 50% 45%, #000 60%, transparent 61%) top/100% 100% no-repeat;
}
.i-guest  { background: linear-gradient(180deg, #98a7ff, #6cc6ff); }

/* Divider */
.divider {
  display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px;
  margin: 14px 0;
}
.divider::before, .divider::after {
  content: ""; height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent);
}
.divider span { color: var(--muted); text-transform: lowercase; letter-spacing: .2em; font-size: .85rem; }

/* Tabs */
.tabs { display: flex; gap: 8px; margin: 6px 0 2px; }
.tab {
  appearance: none; border: 1px solid var(--border);
  background: var(--surface-2); color: var(--text);
  padding: 10px 14px; border-radius: 999px; cursor: pointer; font-weight: 600;
}
.tab.active { background: var(--accent); color: var(--on-accent); border-color: var(--accent); }

/* Panels */
.panel { display: block; opacity: 0; transform: translateY(6px); transition: opacity .2s, transform .2s; }
.panel.active { opacity: 1; transform: translateY(0); }

/* Forms */
.form.vstack { display: grid; gap: 12px; }
.field .label { display: block; font-size: .9rem; color: var(--muted); margin: 2px 0 6px; }

.field input, .field select, .field textarea {
  width: 100%; height: 46px; padding: 0 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text); border-radius: 12px;
  transition: border-color .2s, background .2s, box-shadow .2s;
}
.field input::placeholder { color: var(--muted); }
.field input:focus { outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 40%, transparent); background: var(--surface-2); }

.row { display: flex; gap: 10px; align-items: center; }
.row.between { justify-content: space-between; }

/* Phone code row */
.code-row { margin-top: 8px; }
.hint { color: var(--muted); font-size: .85rem; margin: 8px 0 0; }

/* Toast / message area */
.toast-area {
  margin-top: 12px;
  min-height: 28px;
  color: var(--text);
  font-size: .95rem;
}
.toast-area .ok { color: var(--success); }
.toast-area .err { color: var(--danger); }

/* Footer */
.auth-footer { margin-top: 10px; }
.note { color: var(--muted); }
.link { color: var(--link); text-decoration: none; }
.link:hover { text-decoration: underline; }

/* reCAPTCHA slot (invisible, but present) */
.recaptcha-slot { height: 0; overflow: hidden; }

/* Secondary card beneath form */
.postcard { background: var(--surface-2); border: 1px dashed var(--border); }
.tiny { color: var(--muted); margin: 0; }

/* Focus outlines for accessibility on any interactive element */
button:focus-visible, a:focus-visible, input:focus-visible, .tab:focus-visible {
  outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 40%, transparent);
}

/* Responsive adjustments */
@media (max-width: 980px) {
  .auth-shell { grid-template-columns: 1fr; padding: 24px; align-items: start; }
  .brand-pane { order: 2; }
  .auth-pane { order: 1; }
  .oauth-row { grid-template-columns: 1fr; }
}

@media (max-width: 520px) {
  .auth-card, .brand-card, .postcard { padding: 16px; border-radius: 14px; }
  .btn { height: 46px; }
  .field input { height: 44px; }
}
